# Pre-Deployment Checklist

## Before You Deploy

### ✅ Code Changes Verified
- [ ] `runtime.txt` created with `python-3.11.9`
- [ ] `requirements.txt` cleaned (no Windows packages)
- [ ] `demodev/render.yaml` updated with correct paths
- [ ] `demodev/Procfile` created
- [ ] `demodev/demodev/settings.py` is production-ready
- [ ] `demodev/demodev/wsgi.py` is correct

### ✅ Local Testing
```bash
cd demodev
gunicorn demodev.wsgi:application
```
- [ ] Command runs without errors
- [ ] Server starts on http://127.0.0.1:8000
- [ ] No import errors
- [ ] No module not found errors

### ✅ Git Preparation
```bash
git status
```
- [ ] All changes are staged
- [ ] No uncommitted changes
- [ ] Ready to push

### ✅ Commit and Push
```bash
git add runtime.txt requirements.txt demodev/render.yaml demodev/Procfile
git commit -m "Fix Render deployment: Python 3.11, correct Gunicorn paths, cleaned dependencies"
git push origin main
```
- [ ] Changes pushed to GitHub
- [ ] No push errors

---

## Render Dashboard Configuration

### ✅ Web Service Settings
- [ ] Build Command: `cd demodev && pip install -r ../requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate`
- [ ] Start Command: `cd demodev && gunicorn demodev.wsgi:application`
- [ ] Python Version: 3.11 (via runtime.txt)

### ✅ Environment Variables
- [ ] `DEBUG=False`
- [ ] `SECRET_KEY=<auto-generated>`
- [ ] `DATABASE_URL=<auto-populated>`
- [ ] `ALLOWED_HOSTS=*.onrender.com,localhost,127.0.0.1`

### ✅ Database
- [ ] PostgreSQL database created
- [ ] Database name: `twitter_db`
- [ ] Database user: `twitter_user`

---

## Deployment Process

### Step 1: Trigger Deploy
- [ ] Go to Render dashboard
- [ ] Select your web service
- [ ] Click "Manual Deploy"
- [ ] Wait for build to start

### Step 2: Monitor Build
- [ ] Watch logs in "Logs" tab
- [ ] Verify dependencies install
- [ ] Verify migrations run
- [ ] Verify static files collect
- [ ] Verify app starts

### Step 3: Verify Deployment
- [ ] App loads at `https://your-app-name.onrender.com`
- [ ] No 500 errors
- [ ] Admin panel works at `/admin`
- [ ] API responds at `/api/`

---

## Post-Deployment Verification

### ✅ Application Health
- [ ] Homepage loads
- [ ] Admin panel accessible
- [ ] API endpoints respond
- [ ] Database connected
- [ ] Static files loading

### ✅ Logs Check
- [ ] No error messages
- [ ] No warning messages
- [ ] App running normally

### ✅ Functionality Test
- [ ] Can create user account
- [ ] Can log in
- [ ] Can create tweets
- [ ] Can view tweets
- [ ] Can access API

---

## Troubleshooting Checklist

If deployment fails:

### Check 1: Render Logs
- [ ] Read full error message
- [ ] Search for "Error" or "Traceback"
- [ ] Note the exact error

### Check 2: Configuration
- [ ] Verify `runtime.txt` exists
- [ ] Verify build command is correct
- [ ] Verify start command is correct
- [ ] Verify environment variables are set

### Check 3: Local Test
```bash
cd demodev
gunicorn demodev.wsgi:application
```
- [ ] Works locally
- [ ] No import errors
- [ ] No module errors

### Check 4: Dependencies
- [ ] Check `requirements.txt` for Windows packages
- [ ] Verify all packages are compatible with Python 3.11
- [ ] Check for version conflicts

### Check 5: Database
- [ ] Verify PostgreSQL database exists
- [ ] Verify `DATABASE_URL` is set
- [ ] Verify migrations ran successfully

---

## Common Issues & Solutions

| Issue | Solution |
|-------|----------|
| `ModuleNotFoundError: No module named 'app'` | Use correct start command: `cd demodev && gunicorn demodev.wsgi:application` |
| `ModuleNotFoundError: No module named 'demodev'` | Ensure build command has `cd demodev` |
| `Python version error` | Verify `runtime.txt` has `python-3.11.9` |
| `Static files 404` | Verify `collectstatic` runs in build command |
| `Database connection error` | Verify `DATABASE_URL` environment variable |
| `Import error for pywin32` | Already removed from `requirements.txt` |

---

## Success Criteria

Deployment is successful when:
- ✅ Build completes without errors
- ✅ App starts without errors
- ✅ App is accessible at `https://your-app-name.onrender.com`
- ✅ Admin panel works
- ✅ API endpoints respond
- ✅ No errors in logs

---

## Quick Reference

**Correct Gunicorn Command:**
```
cd demodev && gunicorn demodev.wsgi:application
```

**Build Command:**
```
cd demodev && pip install -r ../requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate
```

**Python Version:**
```
3.11.9
```

**Key Files:**
- `runtime.txt` - Python version
- `requirements.txt` - Dependencies
- `demodev/render.yaml` - Render config
- `demodev/Procfile` - Backup config

---

**Ready to deploy? Follow the steps above and monitor the Render logs!**
